{% extends 'base.html' %}

{% block title %}{{ shop.shop_name }} - InstaStore{% endblock %}

{% block content %}
<!-- Ù‡Ø¯Ø± ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
<div class="shop-header">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h1 class="display-6 mb-2">{{ shop.shop_name }}</h1>
            <p class="mb-2">
                <i class="bi bi-instagram"></i> 
                <a href="https://instagram.com/{{ shop.instagram_username|cut:'@' }}" 
                   target="_blank" 
                   class="text-white text-decoration-none">
                    {{ shop.instagram_username }}
                </a>
            </p>
            {% if shop.bio %}
            <p class="mb-0">{{ shop.bio }}</p>
            {% endif %}
        </div>
        <div class="col-md-4 text-md-end">
            <div class="bg-white text-dark d-inline-block p-3 rounded">
                <div class="small text-muted">ØªÙ…Ø§Ø³ Ø¨Ø§ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</div>
                <div class="fw-bold">{{ shop.phone_number }}</div>
            </div>
        </div>
    </div>
</div>

<!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ Ùˆ Ø¬Ø³ØªØ¬Ùˆ -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <h6 class="card-title">ğŸ” ÙÛŒÙ„ØªØ± Ù…Ø­ØµÙˆÙ„Ø§Øª</h6>
                
                <!-- Ø¬Ø³ØªØ¬Ùˆ -->
                <div class="mb-3">
                    <input type="text" 
                           class="form-control form-control-sm" 
                           placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„..."
                           hx-get="/shop/{{ shop.slug }}/search/"
                           hx-trigger="keyup changed delay:500ms"
                           hx-target="#products-grid"
                           name="q">
                </div>
                
                <!-- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ -->
                <h6 class="mt-3 mb-2">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</h6>
                <div class="list-group list-group-flush">
                    <a href="/shop/{{ shop.slug }}/" 
                       class="list-group-item list-group-item-action {% if not request.GET.category %}active{% endif %}">
                       Ù‡Ù…Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª
                    </a>
                    {% for category in categories %}
                    <a href="/shop/{{ shop.slug }}/?category={{ category.id }}" 
                       class="list-group-item list-group-item-action {% if request.GET.category == category.id|stringformat:'i' %}active{% endif %}">
                       {{ category.name }}
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª -->
    <div class="col-md-9">
        <div class="row" id="products-grid">
            {% include 'partials/product_list.html' %}
        </div>
        
        <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨ÛŒØ´ØªØ± -->
        {% if products|length >= 12 %}
        <div class="text-center mt-4">
            <button class="btn btn-outline-primary"
                    hx-get="/shop/{{ shop.slug }}/load-more/?offset={{ products|length }}"
                    hx-target="#products-grid"
                    hx-swap="beforeend">
                <i class="bi bi-plus-circle"></i> Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨ÛŒØ´ØªØ±
            </button>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}